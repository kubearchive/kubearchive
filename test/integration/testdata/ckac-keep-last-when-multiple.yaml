# Copyright KubeArchive Authors
# SPDX-License-Identifier: Apache-2.0
---
apiVersion: kubearchive.org/v1
kind: ClusterKubeArchiveConfig
metadata:
  name: kubearchive
spec:
  resources:
    - selector:
        apiVersion: batch/v1
        kind: Job
      keepLastWhen:
        - when: "has(status.completionTime) && metadata.name.startsWith('vacuum-job-') && metadata.name.matches('.*[02468]$')"
          count: 2
          sort: "metadata.creationTimestamp"
        - when: "has(status.completionTime) && metadata.name.startsWith('vacuum-job-') && metadata.name.matches('.*[13579]$')"
          count: 3
          sort: "metadata.creationTimestamp"
